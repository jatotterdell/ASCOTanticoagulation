---
title: "ASCOT Anticoagulation Clinical Study Report"
date: '2022-06-30'
author:
  - name: James Totterdell
    affiliation: University of Sydney
  - name: Rob Mahar
    affiliation: University of Melbourne
format:
  pdf:
    documentclass: scrreprt
    toc: true
    toc-depth: 4
    number-sections: true
    colorlinks: true
    lof: true
    lot: true
    linestretch: "1.2"
    mainfont: TeX Gyre Pagella
    mathfont: TeX Gyre Pagella Math
    monofont: TeX Gyre Cursor
    sansfont: TeX Gyre Heros
    include-in-header:
      - packages.tex
execute: 
  echo: false
---

# Synopsis

# Introduction

## Purpose

The trial steering committee (TSC) closed randomisation to the anticoagulation domain on xx xxx 2022. The blinded statistical analysis workin group prepared a statistical analysis plan (SAP) for reporting the results of the anticoagulation domain. The unblinded team of statisticians undertook these analysis using the relevant records as extracted from the database on 2022-06-06.

This report summarises the data and results for the anticoagulation domain. The report restricts these summaries and analyses to the interventions available in the anticoagulation domain and does not report on the interventions in the antiviral domain.

## Trial Status


# Results

## Study Population

### Summary

At the time of database lock for the anticoagulation domain, 1,599 participants had been enrolled onto the study platform and 1,574 participants had been randomised to the anticoagulation domain. The first participant was randomised on 2021-02-08 and the last participant enrolled into the anticoagulation domain was randomised on 2022-03-29.

### Disposition

Of the 1,574 participants randomised to the anticoagulation domain, 18 withdrew consent for follow-up leaving 1,556 participants continuing to study day 28. The analyses and summaries included in this report exclude only data on participants who withdrew consent for follow-up.

Platform and domain specific flow diagrams are included in @fig-platform-flow and @fig-anticoagulation-flow respectively.

![Platform flowchart.](platform_flowchart.tex){#fig-platform-flow}

![Anticoagulation domain flowchart.](domain_anticoagulation_flowchart.tex){#fig-anticoagulation-flow}

@fig-enrolments presents overall platform enrolments by calendar time with timing of intervention availabilities and interim analyses. Enrolments by country are presented in @fig-enrolments-country. Due to the changes to the trial which occurred independently of the within trial results, the initial allocation ratios were not changed during recruitment to the anticoagulation domain. Therefore, the only trial adaptations which occurred were the cessation of the standard dose plus aspirin intervention in the anticoagulation domain, the opening of the antiviral domain, and the introduction of the therapeutic dose intervention into the anticoagulation domain. Despite this, the timing of interim analyses are indicated on the Figures.

```{r}
#| label: fig-enrolments
#| fig-cap: |
#|   Overall enrolment to the anti-coagulation domain and intervention availability.
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-overall.pdf"
)
```

```{r}
#| label: fig-enrolments-country
#| fig-cap: |
#|   Enrolment to platform and intervention availability by country.
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-country.pdf"
)
```

```{r}
#| label: fig-enrolments-india-sites
#| fig-cap: |
#|   Enrolment to sites in India. 
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-india-sites.pdf"
)
```

```{r}
#| label: fig-enrolments-australia-sites
#| fig-cap: |
#|   Enrolment to sites in Australia. 
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-australia-sites.pdf"
)
```

```{r}
#| label: fig-enrolments-nepal-nz-sites
#| fig-cap: |
#|   Enrolment to sites in Nepal and New Zealand 
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-nepalnz-sites.pdf"
)
```

\clearpage

### Intervention Allocations

Due to the trial progression, response adaptive randomisation was never activated in the anti-coagulation domain. Therefore, allocations to the interventions were uniform across all available interventions from trial start to trial closure. However, the available interventions changed over time due to external decisions. The following figures summarise treatment allocations over time.

\clearpage

### Deviations

{{< pagebreak >}}

### Analysis Sets

The primary analysis population includes all participants who were randomised to the anticoagulation domain. For the intention-to-treat (ITT) analysis, all participants randomised to the anticoagulation domain were analysed according to their aside regimen irrespective of deviations or non-adherence.

Secondary analyses expand the analysis set to include all participants randomised to the platform including those who were not randomised to the anticoagulation domain for the purpose of additional covariate information.

Per-protocol (PP) analyses restrict both of analysis sets to only those participants who sufficiently adhered to the protocol as determined by blinded review. Participants who were not PP had their outcomes set to missing.

### Baseline Characteristics

As previously mentioned, the following summaries exclude participants who withdrew consent for follow-up.

#### Demographics

Baseline demographics stratified by anticoagulation interventions are reported in @tbl-baseline-demographics
```{r}
#| label: tbl-baseline-demographics
#| tbl-cap: |
#|   Baseline demographics for participants randomised to the anticoagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "demographics.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

The age distribution of participants are presented in @fig-age-overall.
```{r}
#| label: fig-age-overall
#| fig-cap: |
#|   Distribution of age amongst participants randomised to the anticoagulation domain.
knitr::include_graphics(
  "../outputs/figures/baseline/age-overall.pdf"
)
```

#### Co-morbidities

Baseline co-morbidities stratified by anticoagulation interventions are reported in @tbl-baseline-comorbidities.
```{r}
#| label: tbl-baseline-comorbidities
#| tbl-cap: |
#|   Baseline comorbidities for participants randomised to the anticoagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "comorbidities.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

#### Prognostics

Baseline prognostics stratified by anticoagulation interventions are reported in @tbl-baseline-prognostics.
```{r}
#| label: tbl-baseline-prognostics
#| tbl-cap: |
#|   Baseline prognostics for participants randomised to the anticoagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "prognostics.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

The relative timing (in days) of hospitalisation, symptom onset, randomisation, and first positive test are presented in @fig-days-to-events-overall.
```{r}
#| label: fig-days-to-events-overall
#| fig-cap: |
#|   Days between events for hospitalisation, randomisation,
#|   symptom onset, and first positive test.
knitr::include_graphics(
  "../outputs/figures/baseline/days-between-events-overall.pdf"
)
```

\clearpage

### Discharge Summaries

#### Drugs Received During Hospital Stay

There were 18 participants without a discharge record (due to withdrawal of consent for follow-up). For the continuing participants, the other medications received during their hospital stay are reported in @tbl-discharge-drugs.

```{r}
#| label: tbl-discharge-drugs
#| tbl-cap: |
#|   Drugs received during hospital stay for participants randomised to 
#|   the anti-coagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "drugs.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```


### Adherence

\clearpage

## Analyses - General

Bayesian models were computed using Stan via `cmdstanr` (0.5.2 and cmdstan version 2.29.2) in R (4.2.0). For each model, 8 chains were used with a warm-up of 1000 iterations and sampling for 2500 iterations per chain resulting in 20,000 posterior draws per model. Standard diagnostics were assessed for each model (divergent transitions, trace plots, R-hat). If an issue was identified (e.g. divergent transitions) then the default sampling parameters may have been adjusted (e.g. increasing target acceptance rate or increasing maximum tree depth). If any convergence issues resulted for the pre-specified models, then they are reported along with the model results. If the model was amended in any way to satisfy convergence criteria (e.g. aggregation of groups, removal of model terms) then this is reported in the relevant section. Sampling was run using a different (randomly selected) random seed for each model, and these were recorded for replication.

Missing outcome data were not imputed for any of the models (with the exception of the deterministic imputation used in the best-case/worst-case sensitivity analyses).

For models where site was included as a random effect, sites with less than 5 participants were aggregated within country into an "other sites" grouping. Similarly, for models where epoch was included, epochs with less than 10 participants were aggregated with the adjacent epoch. 

\clearpage

## Primary Outcome

The primary outcome is a composite comprised of:

- day 28 mortality
- vasopressor/inotropic support within first 28 days
- new intensive respiratory support within first 28 days.

The definition also allowed for patients who had unknown day 28 status, but were discharged against medical advice (DAMA) and designated as likely to die within 28 days. However, no participants met this criteria (all cases of DAMA and likely to die within 28 days had known day 28 status).

The proportion of participants who met the primary outcome, and rates of missingness, are reported in @tbl-primary-composite-summary. A breakdown of the composite, including missingness by component is reported in @tbl-primary-composite-breakdown. Missingness was predominantly due to unknown patient status at study day 28. Amongst participants where the primary outcome was observed (1,526), 103 (7%) met the primary outcome criteria, most commonly due to requirement of new intensive ventilation and/or death (@tbl-primary-composite-combinations).

A summary of the primary outcome by each of the baseline covariates pre-specified to be included in the primary model (or as pre-specified subgroup analyses) are presented in the appendix (@sec-app-primary-outcome-model-cov).

```{r}
#| label: tbl-primary-composite-summary
#| tbl-cap: |
#|   Summary of primary composite outcome by treatment group.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "anticoagulation-summary.tex"))
writeLines(tab)
```

```{r}
#| label: tbl-primary-composite-breakdown
#| tbl-cap: |
#|   Breakdown of primary composite outcome by treatment group.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "composite-breakdown.tex"))
writeLines(tab)
```

```{r}
#| label: tbl-primary-composite-combinations
#| tbl-cap: |
#|   Breakdown of primary composite combinations by treatment group.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "composite-combinations.tex"))
writeLines(tab)
```

\clearpage

### Primary Analysis (ACS-ITT set)

The primary model was a logistic regression model adjusting for anticoagulation treatment, antiviral treatment, age ($\geq 60$), and country, with random effects for site (nested within country) and epoch (calendar time 4 week intervals). The two most recent epochs were combined due to small numbers, and the two earliest epochs were combined for the same reason.

The primary analysis was based on the ACS-ITT set using the full model as specified in the statistical appendix to the core protocol.

```{r}
#| label: tbl-primary-model-acs-itt-summary
#| tbl-cap: |
#|   Summary of model parameters (fixed-effects odds-ratios) 
#|   for primary model fit to the ACS-ITT set.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "primary-model-acs-itt-summary-table.tex"))
writeLines(tab)
```

```{r}
#| label: fig-primary-model-acs-itt-site-epoch-parameters
#| fig-cap: |
#|   Posterior Summaries (point - median, block - 0.75 CrI, line - 0.95 CrI) 
#|   of odds ratio for epoch and site effects for
#|   the primary model fit to the ACS-ITT set.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/primary-model-epoch-site-terms.pdf"
)
```

\clearpage

### Subgroups

The pre-specified subgroups where treatment effect heterogeneity was to be investigate were:

- country
- days since symptom onset ($\leq 7$ or $>7$ days)
- age at enrolment ($<60$ or $\geq 60$ years of age)
- supplemental oxygen or oxygen saturation less than 94% at randomisation (yes or no)
- receipt of corticosteroid during hospital stay (yes or no)
- receipt of remdesivir during hospital stay (yes or no)
- receipt of other agent intended to be antiviral against SARS-CoV-2 during hospital stay (yes or no)

Domain-specific subgroups were additionally specified as:

- weight ($< 120$ or $\geq 120$ kg)
- patient on aspirin at baseline (yes or no)
- D-dimer above upper limit of normal at baseline (yes or no)

For each sub-group analysis, the primary model was extended to include an interaction term between the covariate of interest and the anticoagulation interventions.

\clearpage

### Sensitivity

#### FAS-ITT

The primary model was fit to the expanded FAS-ITT set. The model treatment effects were similar to those obtained under the ACS-ITT set.

```{r}
#| label: tbl-primary-model-fas-itt-summary
#| tbl-cap: |
#|   Summary of model parameters (fixed-effects odds-ratios) 
#|   for primary model fit to the FAS-ITT set.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "primary-model-fas-itt-summary-table.tex"))
writeLines(tab)
```


\clearpage

## Secondary Outcomes

For all secondary outcomes, the primary model (adjusting for interventions, age group, country, site, and epoch using the relevant outcome model) was fit to the ACS-ITT set. The only sensitivity analysis conducted was to repeat the analysis restricted to contemporaneous controls without the epoch term.

### Time to clinical recovery

\clearpage

### All-cause mortality

All-cause mortality to day 28 was modelled using the same method as for the primary outcome.

### WHO outcome scale

### Days free of hospitalisation

\clearpage

## Domain Specific Outcomes

\clearpage

## Safety

# Appendix

## Primary Outcome by Model Covariates (ACS-ITT) {#sec-app-primary-outcome-model-cov}

```{r}
#| label: fig-primary-outcome-age
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by age at randomisation. Vertical dashed line indicates the 
#|   pre-specified cut-point of 60 years of age.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-age.pdf"
)
```

```{r}
#| label: fig-primary-outcome-country
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by country of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-country.pdf"
)
```

```{r}
#| label: fig-primary-outcome-country-site
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by country and site of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-country-site.pdf"
)
```

```{r}
#| label: fig-primary-outcome-calendar-time
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by calendar time (month) of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-calendar-time.pdf"
)
```

```{r}
#| label: fig-primary-outcome-dsfs
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by days since first symptoms at randomisation. 
#|   Vertical dashed line indicates the pre-specified cut-point of 7 days.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-dsfs.pdf"
)
```
