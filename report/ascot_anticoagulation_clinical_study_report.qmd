---
title: "ASCOT Anticoagulation Clinical Study Report"
date: '2022-06-09'
author:
  - name: James Totterdell
    affiliation: University of Sydney
  - name: Rob Mahar
    affiliation: University of Melbourne
format:
  pdf:
    documentclass: scrreprt
    toc: true
    toc-depth: 4
    number-sections: true
    colorlinks: true
    lof: true
    lot: true
    linestretch: "1.2"
    mainfont: TeX Gyre Pagella
    mathfont: TeX Gyre Pagella Math
    monofont: TeX Gyre Cursor
    sansfont: TeX Gyre Heros
    include-in-header:
      - packages.tex
execute: 
  echo: false
---

# Synopsis

# Introduction

## Purpose

The trial steering committee (TSC) closed randomisation to the anticoagulation domain on 8 April 2022. The blinded statistical analysis working group prepared a statistical analysis plan (SAP) for reporting the results of the anticoagulation domain. The unblinded team of statisticians undertook these analysis using the relevant records as extracted from the database on 2022-06-06.

This report summarises the data and results for the anticoagulation domain. The report restricts these summaries and analyses to the interventions available in the anticoagulation domain and does not report on the interventions in the antiviral domain.

## Trial Status



# Results

## Study Population

### Summary

At the time of database lock for the anticoagulation domain, 1,599 participants had been enrolled onto the study platform and 1,574 participants had been randomised to the anticoagulation domain. The first participant was randomised on 2021-02-08 and the last participant enrolled into the anticoagulation domain was randomised on 2022-03-29.

### Disposition

Of the 1,574 participants randomised to the anticoagulation domain, 18 withdrew consent for follow-up leaving 1,556 participants continuing to study day 28. The analyses and summaries included in this report exclude data on participants who withdrew consent for follow-up.

Platform and domain specific flow diagrams are included in @fig-platform-flow and @fig-anticoagulation-flow respectively.

![Platform flowchart.](platform_flowchart.tex){#fig-platform-flow}

![Anticoagulation domain flowchart.](domain_anticoagulation_flowchart.tex){#fig-anticoagulation-flow}

@fig-enrolments presents overall platform enrolments by calendar time with timing of intervention availabilities and interim analyses. Enrolments by country are presented in @fig-enrolments-country. Due to the changes to the trial which occurred independently of the within trial results, the initial allocation ratios were not changed during recruitment to the anticoagulation domain. Therefore, the only trial adaptations which occurred were the cessation of the standard dose plus aspirin intervention in the anticoagulation domain, the opening of the antiviral domain, and the introduction of the therapeutic dose intervention into the anticoagulation domain. Despite this, the timing of interim analyses are indicated on the Figures.

```{r}
#| label: fig-enrolments
#| fig-cap: |
#|   Overall enrolment to the anti-coagulation domain and intervention availability.
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-overall.pdf"
)
```

```{r}
#| label: fig-enrolments-country
#| fig-cap: |
#|   Enrolment to platform and intervention availability by country.
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-country.pdf"
)
```

```{r}
#| label: fig-enrolments-india-sites
#| fig-cap: |
#|   Enrolment to sites in India. 
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-india-sites.pdf"
)
```

```{r}
#| label: fig-enrolments-australia-sites
#| fig-cap: |
#|   Enrolment to sites in Australia. 
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-australia-sites.pdf"
)
```

```{r}
#| label: fig-enrolments-nepal-nz-sites
#| fig-cap: |
#|   Enrolment to sites in Nepal and New Zealand 
#|   Vertical dashed lines indicate timing of interim analyses.
knitr::include_graphics(
  "../outputs/figures/baseline/enrolment-nepalnz-sites.pdf"
)
```

\clearpage

### Intervention Allocations

Due to the trial progression, response adaptive randomisation was never activated in the anti-coagulation domain. Therefore, allocations to the interventions were uniform across all available interventions from trial start to trial closure. However, the available interventions changed over time due to external decisions. The following figures summarise treatment allocations over time.

\clearpage

### Deviations

\clearpage

### Analysis Sets

The primary analysis population includes all participants who were randomised to the anticoagulation domain. For the intention-to-treat (ITT) analyses, all participants randomised to the anticoagulation domain were analysed according to their aside regimen irrespective of deviations or non-adherence. This set is referred to as the anticoagulation ITT set (ACS-ITT).

Secondary analyses expand the analysis set to include all participants randomised to the platform including those who were not randomised to the anticoagulation domain for the purpose of additional covariate information. This is referred to as the full analysis set ITT (FAS-ITT)

Per-protocol (PP) analyses restrict both of the analysis sets to only those participants who sufficiently adhered to the protocol as determined by blinded review. Participants who were not PP had their outcomes set to missing, (ACS-PP and FAS-PP).

\clearpage

### Baseline Characteristics

The following baseline summaries exclude participants who withdrew consent for follow-up.

#### Demographics

Baseline demographics stratified by anticoagulation interventions are reported in @tbl-baseline-demographics
```{r}
#| label: tbl-baseline-demographics
#| tbl-cap: |
#|   Baseline demographics for participants randomised to the anticoagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "demographics.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

The age distribution of participants are presented in @fig-age-overall.
```{r}
#| label: fig-age-overall
#| fig-cap: |
#|   Distribution of age amongst participants randomised to the anticoagulation domain.
knitr::include_graphics(
  "../outputs/figures/baseline/age-overall.pdf"
)
```

#### Co-morbidities

Baseline co-morbidities stratified by anticoagulation interventions are reported in @tbl-baseline-comorbidities.
```{r}
#| label: tbl-baseline-comorbidities
#| tbl-cap: |
#|   Baseline comorbidities for participants randomised to the anticoagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "comorbidities.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

#### Prognostics

Baseline prognostics stratified by anticoagulation interventions are reported in @tbl-baseline-prognostics.
```{r}
#| label: tbl-baseline-prognostics
#| tbl-cap: |
#|   Baseline prognostics for participants randomised to the anticoagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "prognostics.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

The relative timing (in days) of hospitalisation, symptom onset, randomisation, and first positive test are presented in @fig-days-to-events-overall.
```{r}
#| label: fig-days-to-events-overall
#| fig-cap: |
#|   Days between events for hospitalisation, randomisation,
#|   symptom onset, and first positive test.
knitr::include_graphics(
  "../outputs/figures/baseline/days-between-events-overall.pdf"
)
```

\clearpage

### Discharge Summaries

#### Drugs Received During Hospital Stay

There were 18 participants without a discharge record (due to withdrawal of consent for follow-up). For the continuing participants, the other medications received during their hospital stay are reported in @tbl-discharge-drugs.

```{r}
#| label: tbl-discharge-drugs
#| tbl-cap: |
#|   Drugs received during hospital stay for participants randomised to 
#|   the anti-coagulation domain.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "baseline", "drugs.tex"))
writeLines(tab[-which(grepl("caption", tab))])
```

\clearpage

### Adherence

\clearpage

## Analyses - General

Bayesian models were computed using Stan via `cmdstanr` (0.5.2 and cmdstan version 2.29.2) in R (4.2.0). For each model, 8 chains were used with a warm-up of 1000 iterations and sampling for 2500 iterations per chain resulting in 20,000 posterior draws per model. Standard diagnostics were assessed for each model (divergent transitions, trace plots, R-hat). If an issue was identified (e.g. divergent transitions) then the default sampling parameters may have been adjusted (e.g. increasing target acceptance rate or increasing maximum tree depth). If any convergence issues resulted for the pre-specified models, then they are reported along with the model results. If the model was amended in any way to satisfy convergence criteria (e.g. aggregation of groups, removal of model terms) then this is reported in the relevant section. Sampling was run using a different (randomly selected) random seed for each model, and these were recorded for replication.

Missing outcome data were not imputed for any of the models (with the exception of the deterministic imputation used in the best-case/worst-case sensitivity analyses).

For models where site was included as a random effect, sites with less than 5 participants were aggregated within country into an "other sites" grouping. Similarly, for models where epoch was included, epochs with less than 10 participants were aggregated with the adjacent epoch. 

\clearpage

## Primary Outcome

The primary outcome is a composite comprised of:

- day 28 mortality
- vasopressor/inotropic support within first 28 days
- new intensive respiratory support within first 28 days.

The definition also allowed for patients who had unknown day 28 status, but were discharged against medical advice (DAMA) and designated as likely to die within 28 days. However, no participants met this criteria (all cases of DAMA and likely to die within 28 days had known day 28 status).

The proportion of participants who met the primary outcome, and rates of missingness, are reported in @tbl-primary-composite-summary. A breakdown of the composite, including missingness by component is reported in @tbl-primary-composite-breakdown. Missingness was predominantly due to unknown patient status at study day 28. Amongst participants where the primary outcome was observed (1,526), 103 (7%) met the primary outcome criteria, most commonly due to requirement of new intensive ventilation and/or death (@tbl-primary-composite-combinations).

A summary of the primary outcome by each of the baseline covariates pre-specified to be included in the primary model (or as pre-specified subgroup analyses) are presented in the appendix (@sec-app-primary-outcome-model-cov).

```{r}
#| label: tbl-primary-composite-summary
#| tbl-cap: |
#|   Summary of primary composite outcome by treatment group.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "anticoagulation-summary.tex"))
writeLines(tab)
```

```{r}
#| label: tbl-primary-composite-breakdown
#| tbl-cap: |
#|   Breakdown of primary composite outcome by treatment group.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "composite-breakdown.tex"))
writeLines(tab)
```

```{r}
#| label: tbl-primary-composite-combinations
#| tbl-cap: |
#|   Breakdown of primary composite combinations by treatment group.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "composite-combinations.tex"))
writeLines(tab)
```

\clearpage

### Primary Analysis (ACS-ITT set)

The primary model was a logistic regression model adjusting for anticoagulation treatment, antiviral treatment, age ($\geq 60$), and country, with random effects for site (nested within country) and epoch (calendar time 4 week intervals). The two most recent epochs were combined due to small numbers, and the two earliest epochs were combined for the same reason.

The primary analysis was based on the ACS-ITT set using the full model as specified in the statistical appendix to the core protocol.

```{r}
#| label: tbl-primary-model-acs-itt-summary
#| tbl-cap: |
#|   Summary of model parameters (fixed-effects odds-ratios) 
#|   for primary model fit to the ACS-ITT set.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "primary-model-acs-itt-summary-table.tex"))
writeLines(tab)
```

```{r}
#| label: fig-primary-model-acs-itt-site-epoch-parameters
#| fig-cap: |
#|   Posterior Summaries (point - median, block - 0.75 CrI, line - 0.95 CrI) 
#|   of odds ratio for epoch and site effects for
#|   the primary model fit to the ACS-ITT set.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/primary-model-epoch-site-terms.pdf"
)
```

\clearpage

### Subgroups

The pre-specified subgroups where treatment effect heterogeneity was to be investigate were:

- country
- days since symptom onset ($\leq 7$ or $>7$ days)
- age at enrolment ($<60$ or $\geq 60$ years of age)
- supplemental oxygen or oxygen saturation less than 94% at randomisation (yes or no)
- receipt of corticosteroid during hospital stay (yes or no)
- receipt of remdesivir during hospital stay (yes or no)
- receipt of other agent intended to be antiviral against SARS-CoV-2 during hospital stay (yes or no)

Domain-specific subgroups were additionally specified as:

- weight ($< 120$ or $\geq 120$ kg)
- patient on aspirin at baseline (yes or no)
- D-dimer above upper limit of normal at baseline (yes or no)

For each sub-group analysis, the primary model was extended to include an interaction term between the covariate of interest and the anticoagulation interventions.

#### Country

A subgroup analysis of country is undertaken using the ACS-ITT set. A summary of the primary outcome by country and intervention is reported in @tbl-descriptive-acs-itt-subgroup-country. Note that no participants enrolled in Nepal or New Zealand received standard dose plus aspirin, and very few in Australia received it, due to the timing of its removal from the domain. Despite this, an interaction term for country and standard dose plus aspirin was retained in the model, however, the associated effect corresponds to the assumed prior given there is no data available.

```{r}
#| label: tbl-descriptive-acs-itt-subgroup-country
#| tbl-cap: |
#|   Summary of participant outcomes by country of enrolment in
#|   the ACS-ITT set.
#| results: asis
tab <- readLines(file.path(
  "..", "outputs", "tables", "outcomes", "primary", 
  "descriptive-acs-itt-subgroup-country-descriptive.tex"))
writeLines(tab)
```

```{r}
#| label: fig-subgroup-acs-itt-country
#| eval: false
#| fig-cap: |
#|   Posterior Summaries (point - median, block - 0.75 CrI, line - 0.95 CrI) 
#|   of odds ratio for anticoagulation interventions by country subgruop using
#|   ACS-ITT set.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/subgroup-country-hte.pdf"
)
```

The primary model was extended to include an interaction between country and anticoagulation intervention.

#### Age group

```{r}
#| label: tbl-descriptive-acs-itt-subgroup-age
#| tbl-cap: |
#|   Summary of participant outcomes by age group at enrolment in
#|   the ACS-ITT set.
#| results: asis
tab <- readLines(file.path(
  "..", "outputs", "tables", "outcomes", "primary", 
  "descriptive-acs-itt-subgroup-age-descriptive.tex"))
writeLines(tab)
```

#### Days since symptom onset

```{r}
#| label: tbl-descriptive-acs-itt-subgroup-dsfs
#| tbl-cap: |
#|   Summary of participant outcomes by days since symptom onset in
#|   the ACS-ITT set.
#| results: asis
tab <- readLines(file.path(
  "..", "outputs", "tables", "outcomes", "primary", 
  "descriptive-acs-itt-subgroup-dsfs-descriptive.tex"))
writeLines(tab)
```

\clearpage

### Sensitivity

#### FAS-ITT

The primary model was fit to the expanded FAS-ITT set. The model treatment effects were similar to those obtained under the ACS-ITT set.

```{r}
#| label: tbl-primary-model-fas-itt-summary
#| tbl-cap: |
#|   Summary of model parameters (fixed-effects odds-ratios) 
#|   for primary model fit to the FAS-ITT set.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "primary", "primary-model-fas-itt-summary-table.tex"))
writeLines(tab)
```

\clearpage

## Secondary Outcomes

For all secondary outcomes, the primary model (adjusting for interventions, age group, country, site, and epoch using the relevant outcome model) was fit to the ACS-ITT set. The only sensitivity analysis conducted was to repeat the analyses restricted to contemporaneous controls without the epoch term.

### Time to clinical recovery

```{r}
#| label: fig-7-1-descriptive
#| fig-cap: |
#|   Observed progression of patients with respect to death and recovery.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/outcome-7-1-descriptive.pdf"
)
```

\clearpage

### WHO 8-point ordinal outcome scale at day 28

```{r}
#| label: fig-7-2-descriptive
#| fig-cap: |
#|   Observed distribution of WHO outcome scale at day 28 by treatment group.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/outcome-7-2-descriptive.pdf"
)
```

\clearpage

### All-cause mortality


```{r}
#| label: tbl-7-3-summary
#| tbl-cap: |
#|   Summary of mortality by day 28 by treatment group.
#| results: asis
tab <- readLines(file.path(
  "..", "outputs", "tables", "outcomes", "secondary", "anticoagulation-summary-mortality.tex"))
writeLines(tab)
```

```{r}
#| label: tbl-7-3-primary-model-acs-itt-summary
#| tbl-cap: |
#|   Summary of model parameters (fixed-effects odds-ratios) 
#|   for mortality by day 28 primary model fit to the ACS-ITT set.
#| results: asis
tab <- readLines(file.path("..", "outputs", "tables", "outcomes", "secondary", "7-3-primary-model-acs-itt-summary-table.tex"))
writeLines(tab)
```

```{r}
#| label: fig-7-3-primary-model-acs-itt-site-epoch-parameters
#| fig-cap: |
#|   Posterior Summaries (point - median, block - 75% CrI, line - 95% CrI) 
#|   of odds ratio for epoch and site effects on day 28 mortality for
#|   the primary model fit to the ACS-ITT set.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/7-3-primary-model-epoch-site-terms.pdf"
)
```

\clearpage

### Days alive and free of hospital

```{r}
#| label: fig-7-4-descriptive
#| fig-cap: |
#|   Observed distribution of days alive and free of hospital at day 28 by treatment group.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/outcome-7-4-descriptive.pdf"
)
```

\clearpage

### Days alive and free of invasive or non-invasive ventilation

\clearpage

### Presence of patient reported outcome of shortness of breath

\clearpage

### Modified Medical Research Council (mMRC) breathlessness scale

\clearpage

###  Quality of life as measured by EQ-5D-5L questionnaire

\clearpage

## Domain Specific Outcomes

### Any thrombotic event (or death) to day 28

### Confirmed deep venous thrombosis 

### Confirmed pulmonary embolus

### Confirmed acute myocardial infarction 

### Confirmed ischemic cerebrovascular event

### Any clinically relevant bleeding (non-major or worse)

### Major bleeding (as defined by ISTH) 

### Clinically relevant non-major bleeding

### Heparin-induced thrombocytopenia

### Other confirmed thrombotic

\clearpage

## Safety

# Appendix

## Primary Outcome by Model Covariates (ACS-ITT) {#sec-app-primary-outcome-model-cov}

```{r}
#| label: fig-primary-outcome-age
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by age at randomisation. Vertical dashed line indicates the 
#|   pre-specified cut-point of 60 years of age.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-age.pdf"
)
```

```{r}
#| label: fig-primary-outcome-country
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by country of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-country.pdf"
)
```

```{r}
#| label: fig-primary-outcome-country-site
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by country and site of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-country-site.pdf"
)
```

```{r}
#| label: fig-primary-outcome-calendar-time
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by calendar time (month) of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-calendar-time.pdf"
)
```

```{r}
#| label: fig-primary-outcome-dsfs
#| fig-cap: |
#|   Proportion of participants satisfying primary outcome criteria
#|   by days since first symptoms at randomisation. 
#|   Vertical dashed line indicates the pre-specified cut-point of 7 days.
knitr::include_graphics(
  "../outputs/figures/outcomes/primary/outcome-dsfs.pdf"
)
```

\clearpage

## Mortality to day 28 by Model Covariates (ACS-ITT) {#sec-app-7-3-model-cov}

```{r}
#| label: fig-7-3-age
#| fig-cap: |
#|   Proportion of participants who died by day 28
#|   by age at randomisation. Vertical dashed line indicates the 
#|   pre-specified cut-point of 60 years of age.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/7-3-age.pdf"
)
```

```{r}
#| label: fig-7-3-country
#| fig-cap: |
#|   Proportion of participants who died by day 28
#|   by country of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/7-3-country.pdf"
)
```

```{r}
#| label: fig-7-3-country-site
#| fig-cap: |
#|   Proportion of participants who died by day 28
#|   by country and site of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/7-3-country-site.pdf"
)
```

```{r}
#| label: fig-7-3-calendar-time
#| fig-cap: |
#|   Proportion of participants who died by day 28
#|   by calendar time (month) of randomisation.
knitr::include_graphics(
  "../outputs/figures/outcomes/secondary/7-3-calendar-time.pdf"
)
```
